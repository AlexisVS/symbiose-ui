<div class="overlay-container" *ngIf="!ready">
    <mat-spinner></mat-spinner>
</div>

<div class="container" *ngIf="ready">
    <div class="header-wrap">
        <div class="header">Session › {{session.name}} > Nouvelle commande</div>
        <div style="display: flex; align-items: center;"></div>
    </div>
    <div class="body" style="background-color: #e1e1e1;">
        <div class="actions">
            <div class="actions-std"></div>
            <div class="actions-view"></div>
        </div>

        <div class="view" style="margin: auto;">

            <div class="ticketDetails">
        <!--        
                <p>{{order.session_id.cashdesk_id?.center_id?.organisation_id?.name}}</p>
                <p>{{order.session_id.cashdesk_id?.center_id?.center_office_id?.address_street}}</p>
                <p>{{order.session_id.cashdesk_id?.center_id?.center_office_id?.address_zip}}
                    {{order.session_id.cashdesk_id?.center_id?.center_office_id?.address_city}}</p>
                <p *ngIf="order.session_id.cashdesk_id?.center_id?.organisation_id?.vat_number">
                    {{order.session_id.cashdesk_id?.center_id?.organisation_id?.vat_number}}</p>
        -->            
            </div>
            <hr>
            <div class="customerDetails" *ngIf="invoice">
                <p>{{instance?.customer_id?.name}}</p>
                <p>{{instance?.customer_id?.partner_identity_id?.address_street}}</p>
                <p>{{instance?.customer_id?.partner_identity_id?.address_zip}}
                    {{instance?.customer_id?.partner_identity_id?.address_city}}</p>
                <p>{{instance?.customer_id?.partner_identity_id?.vat_number}}</p>
            </div>

            <ul>
                <li *ngFor="let orderLines of instance?.order_lines_ids; index as i">
                    <span>Produit {{orderLines?.name}}</span> <span>{{orderLines?.price | number : '1.2-2'}} €</span>
                </li>
                <span class="dotts">------</span>
            </ul>

            <div class="subTotal" style="width: 100%;">
                <span>Total:</span> 
                <span style="min-width: fit-content;"> {{instance?.total | number : '1.2-2'}} € HTVA </span>
            </div>

            <div>
                <span class="dotts">------</span>
            </div>

            <div class="total">
                <div style="display: flex; justify-content: space-between; width: 100%;"> 
                    <span><b>TOTAL</b></span>
                    <span><b>{{instance?.price | number : '1.2-2'}} € </b>TTC</span>
                </div>
            </div>
            <hr>
            <ul>
                <li *ngFor="let paymentsPart of instance?.order_payments_ids[0]?.order_payment_parts_ids; index as i">
                    <div *ngIf="paymentsPart.amount != null && paymentsPart?.payment_method !== 'booking' " style="display: flex; justify-content: space-between; width: 100%;">
                        <span>{{paymentsPart?.payment_method}}</span> 
                        <span>{{paymentsPart?.amount | number : '1.2-2'}} €</span>
                    </div>
                </li>
                <span class="dotts">------</span>
            </ul>
            <div>
                <div style="display: flex; justify-content: space-between; width: 100%;"> 
                    <span style="font-weight: bolder; font-size: 1.1rem;"> RENDU</span> 
                    <span>{{(instance?.total_paid - instance?.total) | number : '1.2-2' }} €</span>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 1.5rem;">- - - - - - - - - - - - - - - - - - - - -</div>

        </div>
    </div>
</div>