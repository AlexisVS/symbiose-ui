<section [class.disabled]="instance.status == 'pending'">
    <div class="header">
        <span>Dû: {{instance.total_due | number : '1.2-2'}}€</span>
        <span style="color: #747474;">Restant: {{ instance.total_due-instance.total_paid | number : '1.2-2'}}€</span>
        <div>
            <button mat-icon-button color="primary" (click)="onDisplayProducts()"><mat-icon>list</mat-icon></button>
            <button mat-mini-fab color="accent" (click)="onclickDelete()"><mat-icon>delete</mat-icon></button>
        </div>

    </div>

    <div *ngIf="display !='products'">
        <div style="display: flex; margin: 0.25rem; display: flex; align-items: center;">
            <h3 style="max-height: fit-content;">Encaissements</h3> 
            <button *ngIf="canAddPart()" mat-mini-fab color="accent" (click)="onclickCreateNewPart()" style="transform: scale(0.75);">
                <mat-icon>add</mat-icon>
            </button>
            <button *ngIf="canValidate()" mat-mini-fab color="accent" (click)="onConfirmOrderPayment()" style="margin-left: auto;">
                <mat-icon>check</mat-icon>
            </button>
        </div>
        <ng-container *ngFor="let part of instance.order_payment_parts_ids; index as i">
            <session-order-payments-payment-part 
                [model]="part" 
                [payment]="instance"
                [customer]="customer"
                (updated)="onupdatePart(part.id)"
                (deleted)="ondeletePart(part.id)" 
                (validated)="onvalidate(part)" 
                (click)="onSelectedPaymentPart(i)">
            </session-order-payments-payment-part>
        </ng-container>
    </div>
    <div class="row" *ngIf="display =='products'">
        <div>
            <!-- <div class="line-header">
                <div>name</div>
                <div>unit_price</div>
                <div>qty</div>
            </div> -->
            <ng-container *ngFor="let line of instance.order_lines_ids; index as i">
                <session-order-payments-order-line [model]="line" (deleted)="ondeleteLine(line.id)">
                </session-order-payments-order-line>
            </ng-container>
        </div>
    </div>
</section>