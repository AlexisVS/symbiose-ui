<section>
    <div class="listHeader">
        <button class="headerButton" color="primary"  mat-mini-fab (click)="onButton('main')"><mat-icon style="vertical-align: center;">arrow_back_ios</mat-icon></button>
        <p style="font-weight: bolder;">Détails du prix</p> 
    </div>
    <hr>
    <div class="panels">
        <div class="totals">
            <div class="total">
                Total : <span>{{rendu}} €</span>
            </div>
            <div class="total" style="color: rgb(59, 140, 59);">
                Rendu : <span>{{total}} €</span>
            </div>
            <div *ngFor="let payment of payments; index as i">
                <mat-accordion>
                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                        [expanded]="true" [disabled]="payment.status == 'confirmed'" style="max-width: 100%;">
                        <mat-expansion-panel-header>
                            <mat-panel-title style="font-size: 1.25rem; display: flex; align-items: center;">
                                <span>
                                    Paiement
                                </span>
                                <button style="margin: 0.2rem; box-shadow: none;" mat-mini-fab color="warn"  (click)="onCancel(i)"><mat-icon>cancel</mat-icon></button>   
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="paymentMethod">
                            <div>
                                <mat-button-toggle-group [(ngModel)]="myToggle" (change)="onSelectionChange(myToggle)" class="mat-button-toggle-group;" style="display: flex; flex-direction: column;">
                                    <mat-button-toggle mat-raised-button value="cash">Espèces</mat-button-toggle>
                                    <mat-button-toggle mat-raised-button value="bank">Banque</mat-button-toggle>
                                    <mat-button-toggle mat-raised-button value="reservation">Reservation</mat-button-toggle>
                                    <mat-button-toggle mat-raised-button value="voucher">Voucher</mat-button-toggle>
                                </mat-button-toggle-group>
                            </div>
                            <div>
                                <div>
                                    <mat-label>Total : </mat-label><input [value]="payment.total"
                                        (focus)="onGetFocusedInput(i)" matInput type="number" placeholder="0€">
                                </div>
                                <div *ngIf="myToggle =='reservation' || myToggle =='voucher'">
                                    <mat-label>Numéro : </mat-label><input [value]="payment.number"
                                    (focus)="onGetNumber(i)" matInput type="number" placeholder="0€">
                                </div>
                                <button style="width: 100%; margin-top: 0.2rem" (click)="addPayment(i)" color="primary" mat-raised-button>
                                    <mat-icon>add_box</mat-icon>
                                </button>                      
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>    
            </div>
        </div>
    </div>
</section>